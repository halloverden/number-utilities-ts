import { generateEveryNinForDate } from '@norway/functions';
import { NinListEntity } from '@norway/types';

describe('generateEveryNinForDate()', () => {
  it('should return instance of NinListEntity', () => {
    expect.hasAssertions();
    expect(generateEveryNinForDate(new Date())).toBeInstanceOf(NinListEntity);
  });

  it('should return correct list of nin for 1920-04-05', () => {
    expect.hasAssertions();
    const t = generateEveryNinForDate(new Date(1920, 3, 5));
    expect(t).toBeInstanceOf(NinListEntity);

    const expectedFemale = ['05042049648', '05042049486', '05042049214', '05042049052', '05042048854', '05042048692', '05042048420', '05042048269', '05042047637', '05042047475', '05042047203', '05042047041', '05042046843', '05042046681', '05042046258', '05042046096', '05042045898', '05042045626', '05042045464', '05042045030', '05042044832', '05042044670', '05042044409', '05042044247', '05042044085', '05042043887', '05042043615', '05042043453', '05042043291', '05042042821', '05042042236', '05042042074', '05042041876', '05042041604', '05042041442', '05042041280', '05042041019', '05042040810', '05042040659', '05042040497', '05042040225', '05042040063', '05042039847', '05042039685', '05042039413', '05042039251', '05042038891', '05042038468', '05042038034', '05042037836', '05042037674', '05042037402', '05042037240', '05042037089', '05042036880', '05042036619', '05042036457', '05042036295', '05042036023', '05042035825', '05042035663', '05042035078', '05042034608', '05042034446', '05042034284', '05042034012', '05042033814', '05042033652', '05042033490', '05042033229', '05042033067', '05042032869', '05042032435', '05042032273', '05042032001', '05042031803', '05042031641', '05042031218', '05042031056', '05042030858', '05042030696', '05042030424', '05042030262', '05042029884', '05042029612', '05042029450', '05042029299', '05042029027', '05042028829', '05042028667', '05042028233', '05042028071', '05042027873', '05042027601', '05042027288', '05042027016', '05042026818', '05042026656', '05042026494', '05042026222', '05042026060', '05042025862', '05042025439', '05042025277', '05042025005', '05042024807', '05042024645', '05042024483', '05042024211', '05042023851', '05042023428', '05042023266', '05042022634', '05042022472', '05042022200', '05042022049', '05042021840', '05042021689', '05042021417', '05042021255', '05042021093', '05042020895', '05042020623', '05042020461', '05042020038', '05042019811', '05042019498', '05042019226', '05042019064', '05042018866', '05042018432', '05042018270', '05042018009', '05042017800', '05042017649', '05042017487', '05042017215', '05042017053', '05042016855', '05042016693', '05042016421', '05042015638', '05042015476', '05042015204', '05042015042', '05042014844', '05042014682', '05042014410', '05042014259', '05042014097', '05042013899', '05042013627', '05042013465', '05042013031', '05042012833', '05042012671', '05042012248', '05042012086', '05042011888', '05042011616', '05042011454', '05042011292', '05042011020', '05042010822', '05042010660', '05042010237', '05042010075', '05042009859', '05042009697', '05042009425', '05042009263', '05042008631', '05042008208', '05042008046', '05042007848', '05042007686', '05042007414', '05042007252', '05042007090', '05042006892', '05042006620', '05042006469', '05042006035', '05042005837', '05042005675', '05042005403', '05042005241', '05042004881', '05042004458', '05042004296', '05042004024', '05042003826', '05042003664', '05042003230', '05042003079', '05042002870', '05042002609', '05042002447', '05042002285', '05042002013', '05042001815', '05042001653', '05042001491', '05042001068', '05042000436', '05042000274', '05042000002'];
    const expectedMale = ['05042049990', '05042049729', '05042049567', '05042049133', '05042048935', '05042048773', '05042048501', '05042048188', '05042047718', '05042047556', '05042047394', '05042047122', '05042046924', '05042046762', '05042046339', '05042046177', '05042045979', '05042045707', '05042045545', '05042045383', '05042045111', '05042044913', '05042044751', '05042044328', '05042044166', '05042043968', '05042043534', '05042043372', '05042043100', '05042042902', '05042042740', '05042042589', '05042042317', '05042042155', '05042041957', '05042041795', '05042041523', '05042041361', '05042040578', '05042040306', '05042040144', '05042039928', '05042039766', '05042039332', '05042039170', '05042038972', '05042038700', '05042038549', '05042038387', '05042038115', '05042037917', '05042037755', '05042037593', '05042037321', '05042036961', '05042036538', '05042036376', '05042036104', '05042035906', '05042035744', '05042035582', '05042035310', '05042035159', '05042034950', '05042034799', '05042034527', '05042034365', '05042033733', '05042033571', '05042033148', '05042032788', '05042032516', '05042032354', '05042032192', '05042031994', '05042031722', '05042031560', '05042031137', '05042030939', '05042030777', '05042030505', '05042030343', '05042030181', '05042029965', '05042029531', '05042029108', '05042028748', '05042028586', '05042028314', '05042028152', '05042027954', '05042027792', '05042027520', '05042027369', '05042026737', '05042026575', '05042026303', '05042026141', '05042025943', '05042025781', '05042025358', '05042025196', '05042024998', '05042024726', '05042024564', '05042024130', '05042023932', '05042023770', '05042023509', '05042023347', '05042023185', '05042022987', '05042022715', '05042022553', '05042022391', '05042021921', '05042021336', '05042021174', '05042020976', '05042020704', '05042020542', '05042020380', '05042020119', '05042019730', '05042019579', '05042019307', '05042019145', '05042018947', '05042018785', '05042018513', '05042018351', '05042017991', '05042017568', '05042017134', '05042016936', '05042016774', '05042016502', '05042016340', '05042016189', '05042015980', '05042015719', '05042015557', '05042015395', '05042015123', '05042014925', '05042014763', '05042014178', '05042013708', '05042013546', '05042013384', '05042013112', '05042012914', '05042012752', '05042012590', '05042012329', '05042012167', '05042011969', '05042011535', '05042011373', '05042011101', '05042010903', '05042010741', '05042010318', '05042010156', '05042009778', '05042009506', '05042009344', '05042009182', '05042008984', '05042008712', '05042008550', '05042008399', '05042008127', '05042007929', '05042007767', '05042007333', '05042007171', '05042006973', '05042006701', '05042006388', '05042006116', '05042005918', '05042005756', '05042005594', '05042005322', '05042005160', '05042004962', '05042004539', '05042004377', '05042004105', '05042003907', '05042003745', '05042003583', '05042003311', '05042002951', '05042002528', '05042002366', '05042001734', '05042001572', '05042001300', '05042001149', '05042000940', '05042000789', '05042000517', '05042000355', '05042000193'];

    expect(validateNinListEntity(t, expectedFemale, expectedMale)).toBe(true);
  });

  it('should return correct list of nin for 1988-11-16', () => {
    expect.hasAssertions();
    const t = generateEveryNinForDate(new Date(1988, 10, 16));
    expect(t).toBeInstanceOf(NinListEntity);

    const expectedFemale = ['16118849632', '16118849470', '16118849209', '16118849047', '16118848849', '16118848687', '16118848415', '16118848253', '16118848091', '16118847893', '16118847621', '16118847036', '16118846838', '16118846676', '16118846404', '16118846242', '16118846080', '16118845882', '16118845610', '16118845459', '16118845297', '16118845025', '16118844827', '16118844665', '16118844231', '16118843871', '16118843448', '16118843286', '16118843014', '16118842816', '16118842654', '16118842492', '16118842220', '16118842069', '16118841860', '16118841437', '16118841275', '16118841003', '16118840805', '16118840643', '16118840481', '16118840058', '16118839831', '16118839408', '16118839246', '16118839084', '16118838886', '16118838614', '16118838452', '16118838290', '16118838029', '16118837820', '16118837669', '16118837235', '16118837073', '16118836875', '16118836603', '16118836441', '16118836018', '16118835658', '16118835496', '16118835224', '16118835062', '16118834864', '16118834430', '16118834279', '16118834007', '16118833809', '16118833647', '16118833485', '16118833213', '16118833051', '16118832853', '16118832691', '16118832268', '16118831636', '16118831474', '16118831202', '16118831040', '16118830842', '16118830680', '16118830419', '16118830257', '16118830095', '16118829879', '16118829607', '16118829445', '16118829283', '16118829011', '16118828813', '16118828651', '16118828228', '16118828066', '16118827868', '16118827434', '16118827272', '16118827000', '16118826802', '16118826640', '16118826489', '16118826217', '16118826055', '16118825857', '16118825695', '16118825423', '16118825261', '16118824478', '16118824206', '16118824044', '16118823846', '16118823684', '16118823412', '16118823250', '16118823099', '16118822890', '16118822629', '16118822467', '16118822033', '16118821835', '16118821673', '16118821401', '16118821088', '16118820618', '16118820456', '16118820294', '16118820022', '16118819806', '16118819644', '16118819482', '16118819210', '16118819059', '16118818850', '16118818699', '16118818427', '16118818265', '16118817633', '16118817471', '16118817048', '16118816688', '16118816416', '16118816254', '16118816092', '16118815894', '16118815622', '16118815460', '16118815037', '16118814839', '16118814677', '16118814405', '16118814243', '16118814081', '16118813883', '16118813611', '16118813298', '16118813026', '16118812828', '16118812666', '16118812232', '16118812070', '16118811872', '16118811600', '16118811449', '16118811287', '16118811015', '16118810817', '16118810655', '16118810493', '16118810221', '16118809843', '16118809681', '16118809258', '16118809096', '16118808898', '16118808626', '16118808464', '16118808030', '16118807832', '16118807670', '16118807409', '16118807247', '16118807085', '16118806887', '16118806615', '16118806453', '16118806291', '16118805821', '16118805236', '16118805074', '16118804876', '16118804604', '16118804442', '16118804280', '16118804019', '16118803810', '16118803659', '16118803497', '16118803225', '16118803063', '16118802865', '16118802431', '16118802008', '16118801648', '16118801486', '16118801214', '16118801052', '16118800854', '16118800692', '16118800420', '16118800269', '16118890071', '16118890233', '16118890667', '16118890829', '16118891027', '16118891299', '16118891450', '16118891612', '16118891884', '16118892082', '16118892244', '16118892406', '16118892678', '16118893038', '16118893461', '16118893623', '16118893895', '16118894093', '16118894255', '16118894417', '16118894689', '16118894840', '16118895049', '16118895200', '16118895472', '16118895634', '16118896266', '16118896428', '16118896851', '16118897211', '16118897483', '16118897645', '16118897807', '16118898005', '16118898277', '16118898439', '16118898862', '16118899060', '16118899222', '16118899494', '16118899656', '16118899818'];
    const expectedMale = ['16118849985', '16118849713', '16118849551', '16118849128', '16118848768', '16118848334', '16118848172', '16118847974', '16118847702', '16118847540', '16118847389', '16118847117', '16118846919', '16118846757', '16118846595', '16118846323', '16118846161', '16118845963', '16118845378', '16118845106', '16118844908', '16118844746', '16118844584', '16118844312', '16118844150', '16118843952', '16118843790', '16118843529', '16118843367', '16118842735', '16118842573', '16118842301', '16118841941', '16118841518', '16118841356', '16118841194', '16118840996', '16118840724', '16118840562', '16118840139', '16118839912', '16118839750', '16118839599', '16118839327', '16118839165', '16118838967', '16118838533', '16118838371', '16118837901', '16118837588', '16118837316', '16118837154', '16118836956', '16118836794', '16118836522', '16118836360', '16118835739', '16118835577', '16118835305', '16118835143', '16118834945', '16118834783', '16118834511', '16118834198', '16118833728', '16118833566', '16118833132', '16118832934', '16118832772', '16118832500', '16118832349', '16118832187', '16118831989', '16118831717', '16118831555', '16118831393', '16118831121', '16118830923', '16118830761', '16118830338', '16118830176', '16118829798', '16118829526', '16118829364', '16118828732', '16118828570', '16118828309', '16118828147', '16118827949', '16118827787', '16118827515', '16118827353', '16118827191', '16118826993', '16118826721', '16118826136', '16118825938', '16118825776', '16118825504', '16118825342', '16118825180', '16118824982', '16118824710', '16118824559', '16118824397', '16118824125', '16118823927', '16118823765', '16118823331', '16118822971', '16118822548', '16118822386', '16118822114', '16118821916', '16118821754', '16118821592', '16118821320', '16118821169', '16118820960', '16118820537', '16118820375', '16118820103', '16118819997', '16118819725', '16118819563', '16118818931', '16118818508', '16118818346', '16118818184', '16118817986', '16118817714', '16118817552', '16118817390', '16118817129', '16118816920', '16118816769', '16118816335', '16118816173', '16118815975', '16118815703', '16118815541', '16118815118', '16118814758', '16118814596', '16118814324', '16118814162', '16118813964', '16118813530', '16118813379', '16118813107', '16118812909', '16118812747', '16118812585', '16118812313', '16118812151', '16118811953', '16118811791', '16118811368', '16118810736', '16118810574', '16118810302', '16118810140', '16118809924', '16118809762', '16118809339', '16118809177', '16118808979', '16118808707', '16118808545', '16118808383', '16118808111', '16118807913', '16118807751', '16118807328', '16118807166', '16118806968', '16118806534', '16118806372', '16118806100', '16118805902', '16118805740', '16118805589', '16118805317', '16118805155', '16118804957', '16118804795', '16118804523', '16118804361', '16118803578', '16118803306', '16118803144', '16118802946', '16118802784', '16118802512', '16118802350', '16118802199', '16118801990', '16118801729', '16118801567', '16118801133', '16118800935', '16118800773', '16118800501', '16118800188', '16118890152', '16118890314', '16118890586', '16118890748', '16118891108', '16118891531', '16118891965', '16118892163', '16118892325', '16118892597', '16118892759', '16118892910', '16118893119', '16118893380', '16118893542', '16118893704', '16118893976', '16118894174', '16118894336', '16118894921', '16118895391', '16118895553', '16118895715', '16118895987', '16118896185', '16118896347', '16118896509', '16118896770', '16118896932', '16118897130', '16118897564', '16118897726', '16118897998', '16118898196', '16118898358', '16118898781', '16118898943', '16118899141', '16118899303', '16118899575', '16118899737'];

    expect(validateNinListEntity(t, expectedFemale, expectedMale)).toBe(true);
  });

  it('should return correct list of nin for 2020-03-18', () => {
    expect.hasAssertions();
    const t = generateEveryNinForDate(new Date(2020, 2, 18));
    expect(t).toBeInstanceOf(NinListEntity);

    const expectedFemale = ['18032099811', '18032099498', '18032099226', '18032099064', '18032098866', '18032098432', '18032098270', '18032098009', '18032097800', '18032097649', '18032097487', '18032097215', '18032097053', '18032096855', '18032096693', '18032096421', '18032095638', '18032095476', '18032095204', '18032095042', '18032094844', '18032094682', '18032094410', '18032094259', '18032094097', '18032093899', '18032093627', '18032093465', '18032093031', '18032092833', '18032092671', '18032092248', '18032092086', '18032091888', '18032091616', '18032091454', '18032091292', '18032091020', '18032090822', '18032090660', '18032090237', '18032090075', '18032089859', '18032089697', '18032089425', '18032089263', '18032088631', '18032088208', '18032088046', '18032087848', '18032087686', '18032087414', '18032087252', '18032087090', '18032086892', '18032086620', '18032086469', '18032086035', '18032085837', '18032085675', '18032085403', '18032085241', '18032084881', '18032084458', '18032084296', '18032084024', '18032083826', '18032083664', '18032083230', '18032083079', '18032082870', '18032082609', '18032082447', '18032082285', '18032082013', '18032081815', '18032081653', '18032081491', '18032081068', '18032080436', '18032080274', '18032080002', '18032079896', '18032079624', '18032079462', '18032079039', '18032078830', '18032078679', '18032078407', '18032078245', '18032078083', '18032077885', '18032077613', '18032077451', '18032077028', '18032076668', '18032076234', '18032076072', '18032075874', '18032075602', '18032075440', '18032075289', '18032075017', '18032074819', '18032074657', '18032074495', '18032074223', '18032074061', '18032073863', '18032073278', '18032073006', '18032072808', '18032072646', '18032072484', '18032072212', '18032072050', '18032071852', '18032071690', '18032071429', '18032071267', '18032070635', '18032070473', '18032070201', '18032069823', '18032069661', '18032069238', '18032069076', '18032068878', '18032068606', '18032068444', '18032068282', '18032068010', '18032067812', '18032067650', '18032067499', '18032067227', '18032067065', '18032066867', '18032066433', '18032066271', '18032065801', '18032065488', '18032065216', '18032065054', '18032064856', '18032064694', '18032064422', '18032064260', '18032063639', '18032063477', '18032063205', '18032063043', '18032062845', '18032062683', '18032062411', '18032062098', '18032061628', '18032061466', '18032061032', '18032060834', '18032060672', '18032060400', '18032060249', '18032060087', '18032059860', '18032059437', '18032059275', '18032059003', '18032058805', '18032058643', '18032058481', '18032058058', '18032057698', '18032057426', '18032057264', '18032056632', '18032056470', '18032056209', '18032056047', '18032055849', '18032055687', '18032055415', '18032055253', '18032055091', '18032054893', '18032054621', '18032054036', '18032053838', '18032053676', '18032053404', '18032053242', '18032053080', '18032052882', '18032052610', '18032052459', '18032052297', '18032052025', '18032051827', '18032051665', '18032051231', '18032050871', '18032050448', '18032050286', '18032050014'];
    const expectedMale = ['18032099730', '18032099579', '18032099307', '18032099145', '18032098947', '18032098785', '18032098513', '18032098351', '18032097991', '18032097568', '18032097134', '18032096936', '18032096774', '18032096502', '18032096340', '18032096189', '18032095980', '18032095719', '18032095557', '18032095395', '18032095123', '18032094925', '18032094763', '18032094178', '18032093708', '18032093546', '18032093384', '18032093112', '18032092914', '18032092752', '18032092590', '18032092329', '18032092167', '18032091969', '18032091535', '18032091373', '18032091101', '18032090903', '18032090741', '18032090318', '18032090156', '18032089778', '18032089506', '18032089344', '18032089182', '18032088984', '18032088712', '18032088550', '18032088399', '18032088127', '18032087929', '18032087767', '18032087333', '18032087171', '18032086973', '18032086701', '18032086388', '18032086116', '18032085918', '18032085756', '18032085594', '18032085322', '18032085160', '18032084962', '18032084539', '18032084377', '18032084105', '18032083907', '18032083745', '18032083583', '18032083311', '18032082951', '18032082528', '18032082366', '18032081734', '18032081572', '18032081300', '18032081149', '18032080940', '18032080789', '18032080517', '18032080355', '18032080193', '18032079977', '18032079705', '18032079543', '18032079381', '18032078911', '18032078598', '18032078326', '18032078164', '18032077966', '18032077532', '18032077370', '18032077109', '18032076900', '18032076749', '18032076587', '18032076315', '18032076153', '18032075955', '18032075793', '18032075521', '18032074738', '18032074576', '18032074304', '18032074142', '18032073944', '18032073782', '18032073510', '18032073359', '18032073197', '18032072999', '18032072727', '18032072565', '18032072131', '18032071933', '18032071771', '18032071348', '18032071186', '18032070988', '18032070716', '18032070554', '18032070392', '18032070120', '18032069904', '18032069742', '18032069580', '18032069319', '18032069157', '18032068959', '18032068797', '18032068525', '18032068363', '18032067731', '18032067308', '18032067146', '18032066948', '18032066786', '18032066514', '18032066352', '18032066190', '18032065992', '18032065720', '18032065569', '18032065135', '18032064937', '18032064775', '18032064503', '18032064341', '18032063981', '18032063558', '18032063396', '18032063124', '18032062926', '18032062764', '18032062330', '18032062179', '18032061970', '18032061709', '18032061547', '18032061385', '18032061113', '18032060915', '18032060753', '18032060591', '18032060168', '18032059941', '18032059518', '18032059356', '18032059194', '18032058996', '18032058724', '18032058562', '18032058139', '18032057930', '18032057779', '18032057507', '18032057345', '18032057183', '18032056985', '18032056713', '18032056551', '18032056128', '18032055768', '18032055334', '18032055172', '18032054974', '18032054702', '18032054540', '18032054389', '18032054117', '18032053919', '18032053757', '18032053595', '18032053323', '18032053161', '18032052963', '18032052378', '18032052106', '18032051908', '18032051746', '18032051584', '18032051312', '18032051150', '18032050952', '18032050790', '18032050529', '18032050367'];

    expect(validateNinListEntity(t, expectedFemale, expectedMale)).toBe(true);
  });
});


function validateNinListEntity(ninListEntity: NinListEntity, expectedFemale: string[], expectedMale: string[]): boolean {
  if (ninListEntity.female.length !== expectedFemale.length || ninListEntity.male.length !== expectedMale.length) {
    return false;
  }
  for (const ef of expectedFemale) {
    if (!ninListEntity.female.includes(ef)) {
      return false;
    }
  }

  for (const em of expectedMale) {
    if (!ninListEntity.male.includes(em)) {
      return false;
    }
  }

  return true;
}
